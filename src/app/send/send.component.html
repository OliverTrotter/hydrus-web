<div fxLayout="column">
  <h2 class="mat-display-1">Send to Hydrus</h2>
  <form [formGroup]="sendForm" (ngSubmit)="onSubmit()" fxLayout="column">
    <mat-form-field appearance="outline">
      <mat-label>URL to send</mat-label>
      <input matInput type="url" autocomplete="off" required
      formControlName="sendUrl" placeholder="http://example.com/" >
      <mat-error *ngIf="sendUrl.hasError('pattern') && !sendUrl.hasError('required')">
        Please enter a valid URL
      </mat-error>
      <mat-error *ngIf="sendUrl.hasError('required')">
        URL is required
      </mat-error>
    </mat-form-field>
    <mat-card *ngIf="this.currentUrlInfo" class="url-info-card">
      <mat-card-header>
        <mat-icon mat-card-avatar [color]="this.currentUrlInfo.can_parse ? 'none' : 'warn'">{{this.currentUrlInfo.can_parse ? 'done' : 'error'}}</mat-icon>
        <mat-card-title>{{this.currentUrlInfo.match_name}}</mat-card-title>
        <mat-card-subtitle>{{ this.currentUrlInfo.url_type_string }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content *ngIf="this.currentUrlFiles">
        {{this.currentUrlFiles.url_file_statuses[0] ? this.currentUrlFiles?.url_file_statuses[0].note : 'Not imported yet'}}
      </mat-card-content>
    </mat-card>
    <mat-form-field appearance="outline">
      <mat-label>Destination page name</mat-label>
      <input matInput type="text" autocomplete="off"
      formControlName="destPageName" placeholder="" >
    </mat-form-field>
    <div fxLayout="row">
      <button mat-raised-button color="primary" type="submit" [disabled]="!sendForm.valid">Send to Hydrus</button>
    </div>
  </form>
</div>
